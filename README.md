# JSON SQL - база данных с криптографией с открытым исходным кодом
Данная программа написано полностью на языке Java, и распространяется по лицензии MIT.
>Используемая библиотка Google GSON

## Документация

>База данных использует дженерики - в аргументах можно использовать что угодно, это будет записано в файл базы данных.

Для того, что бы инициализировать базу данных, нужно создать его экземпляр и `передать в конструтор сам класс, с чем будет работать база данных` например.
```java
JsonSQL _jsonSQL = new JsonSQL(User.class);
```

Конструктор
```java
public JsonSQL(Class<T> type){}
```
 
Будьте внимательны, конструктор может вернуть `IOException!`

Важно, что бы объект, который передается в конструктор `JsonSQL(User.class);`
Должен реализовать интерфейс `Identifiable!`

Пример:

```java
public class User implements Identifiable{}
```

`Identifiable` - реализует три функции. `getId`,`getLogin`,и `getPassword`.

### Функции
`saveData(List<T> data);`  - записывает в файл `database.json` массив из объектов любого типа.

Пример:
```java
List<User> userList = new ArrayList<>(); //Массив из типа User.class

userList.add(new User("Andrey","id")); //Добавляем в массив объекты типа User.class
userList.add(....);

JsonSQL jsonSQL = new JsonSQL(User.class); //Создаем и инициализируем JsonSQL, передавая в аргументы тип User.class
jsonSQL.saveData(userList()); - вызываем метод и передаем в аргументы массив из объектов типа User.class
```
В файле `database.json` данные будут иметь такой вид.
```java
[{"name":"Andrey","id":"197c4b39-b4ca-4635-a892-44d3cc4cae1b"}]
```

`loadData();` - возвращает список объектов, считывая их из файла `database.json`, тип объектов будет таким, каким вы задали его в аргументах конструктора.

Пример:
```java
List<User> userList = jsonSQL.loadData();
```

`addData(T object);` - записывает единичный экземляр объекта в базу данных. Это нужно, если к существующей базе данных нужно добавить объект. Работает, если база данных ещё пуста.

Пример:

```java
User andr = new User("Andrey","ID225565");
jsonSQL.addData(andr);
```
`removeObjectById(String id);` - данная функция находит объект по его айди. В аргументах передается строковый айди.

Пример:

```java
jsonSQL.removeObjectById("id228557"); //найдет в базе данных объект с таким айди, и удалит его.
```

`updateObject(String id,T newObject);` - данная функция обновляет данные у объекта, находя его по айди, и заменяя данные на новые. Зачем это нужно? Это нужно, если к примеру у пользователя был изменен логин, или пароль.

Прмиер:

```java
jsonSQL.updateObject("id22322",andrew);
```

`getObjectByID` - данная функция, ищет по айди объект, и возвращает вам объект в Json формате в виде типа `String`.

`getObjectByLoginAndPassowrd(String login,String password,String errorMSG); и getObjectByLogin(String login, String errorMsg);` Работает так-же как и предыдущая функция. Они опциональны.
Аргумент функции `errorMSG` нужен лишь только для дебага.

## Конфигурация
Для конфигурации используется файл `config.json`.
При первом запуске, в корне используемого проекта/программы, будет создана папка `config` с вложенным файлом `configSQL.json`, файл будет иметь такой вид
```json
{
  "path_to_SQL": "./database" --- где ./database - путь самой базы данных.
}
```
После создания конфигуровочного файла, можно задать свой путь файла для базы данных, и при последующем запуске, файл базы данных будет создана в указанном в конфиге месте, и будет использован он.

## Криптография
Криптография использует алгоритм шифрования AES.
В данной библиотеке пристуствует криптография
>Перед началом использования криптографии, нужно задать в переменные операционной системе `ENCRYPTION_KEY`, если его не будет, то вызовет исключение ` RuntimeException("The ENCRYPTION_KEY is not specified in the variables");`

Для того, что бы задать ключ для криптографии, используйте эту комманду:

`Windows`
```cmd
setx ENCRYPTION_KEY "key"
```
`Linux`
```bash
echo 'export ENCRYPTION_KEY="key"' >> ~/.bashrc
source ~/.bashrc 
```
### Документация

`encrypt(String data);` - данная функция шифрует данные в строчном виде, и возвращает зашифрованную строку.

`decrypt(String encryptedData);` - даннфая функция имеет обратное действие, расшифровывает строку, и возвращает строку.
